{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from\"react-router-dom\";import Loader from'../Common/Loader';import'./User.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CreateUser=()=>{const navigate=useNavigate();const createUserApi=\"https://67028a6bbd7c8c1ccd3f27a6.mockapi.io/user\";const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(false);const[user,setUser]=useState({name:\"\",email:\"\",phone:\"\",studentId:\"\",// 학번 필드 추가\nmajor:\"\"// 전공 필드 추가\n});const[validationErrors,setValidationErrors]=useState({});// 유효성 검사 함수\nconst validateForm=()=>{let errors={};if(!user.name)errors.name=\"Name is required.\";if(!user.email){errors.email=\"Email is required.\";}else if(!/\\S+@\\S+\\.\\S+/.test(user.email)){errors.email=\"Email format is invalid.\";}if(!user.studentId)errors.studentId=\"Student ID is required.\";if(!user.major)errors.major=\"Major is required.\";setValidationErrors(errors);// 에러 메시지 모아 alert으로 표시\nif(Object.keys(errors).length>0){let errorMessages=Object.values(errors).join('\\n');// 모든 오류 메시지를 한 문자열로 연결\nalert(\"Please fix the following errors:\\n\".concat(errorMessages));}// 에러가 하나도 없으면 true 반환, 있으면 false 반환\nreturn Object.keys(errors).length===0;};const handelInput=event=>{event.preventDefault();const{name,value}=event.target;console.log(name,value);setUser({...user,[name]:value});};const handelSubmit=async event=>{event.preventDefault();// 유효성 검사 실행\nconst isValid=validateForm();if(!isValid){console.error(\"Form validation failed. Please check the fields.\");return;// 유효하지 않으면 POST 요청 중지\n}console.log(user);try{setIsLoading(true);const response=await fetch(createUserApi,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)});if(response.ok){console.log('Form submitted successfully!');setUser({name:\"\",email:\"\",phone:\"\",studentId:\"\",major:\"\"});navigate('/show-user');}else{console.error('Form submission failed!');}}catch(error){setError(error.message);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[isLoading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"p\",{children:\"User Form\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handelSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"name\",className:\"form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",value:user.name,onChange:handelInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:user.email,onChange:handelInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"pwd\",className:\"form-label\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"phone\",name:\"phone\",value:user.phone,onChange:handelInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"studentId\",className:\"form-label\",children:\"Student ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"studentId\",name:\"studentId\",value:user.studentId,onChange:handelInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"major\",className:\"form-label\",children:\"Major\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"major\",name:\"major\",value:user.major,onChange:handelInput})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary submit-btn\",children:\"Submit\"})]})]});};export default CreateUser;","map":{"version":3,"names":["React","useState","useNavigate","Loader","jsx","_jsx","jsxs","_jsxs","CreateUser","navigate","createUserApi","error","setError","isLoading","setIsLoading","user","setUser","name","email","phone","studentId","major","validationErrors","setValidationErrors","validateForm","errors","test","Object","keys","length","errorMessages","values","join","alert","concat","handelInput","event","preventDefault","value","target","console","log","handelSubmit","isValid","response","fetch","method","headers","body","JSON","stringify","ok","message","className","children","onSubmit","for","type","id","onChange","htmlFor"],"sources":["/Users/pro/github-classroom/2024OSS/5-assignment-4-2-react-practice-xlxhollywood/src/components/User/CreateUser.js"],"sourcesContent":["import React, { useState } from 'react'\nimport {useNavigate } from \"react-router-dom\";\nimport Loader from '../Common/Loader';\nimport './User.css';\nconst CreateUser = () => {\n    const navigate = useNavigate();\n    const createUserApi = \"https://67028a6bbd7c8c1ccd3f27a6.mockapi.io/user\"\n    const [error, setError] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [user, setUser] = useState({\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        studentId: \"\", // 학번 필드 추가\n        major: \"\" // 전공 필드 추가\n    })\n\n    const [validationErrors, setValidationErrors] = useState({});\n\n     // 유효성 검사 함수\n     const validateForm = () => {\n        let errors = {};\n\n        if (!user.name) errors.name = \"Name is required.\";\n        if (!user.email) {\n            errors.email = \"Email is required.\";\n        } else if (!/\\S+@\\S+\\.\\S+/.test(user.email)) {\n            errors.email = \"Email format is invalid.\";\n        }\n        if (!user.studentId) errors.studentId = \"Student ID is required.\";\n        if (!user.major) errors.major = \"Major is required.\";\n\n        setValidationErrors(errors);\n\n        // 에러 메시지 모아 alert으로 표시\n        if (Object.keys(errors).length > 0) {\n            let errorMessages = Object.values(errors).join('\\n'); // 모든 오류 메시지를 한 문자열로 연결\n            alert(`Please fix the following errors:\\n${errorMessages}`);\n        }\n\n        // 에러가 하나도 없으면 true 반환, 있으면 false 반환\n        return Object.keys(errors).length === 0;\n    };\n\n    const handelInput = (event) => {\n        event.preventDefault();\n        const { name, value } = event.target;\n        console.log(name, value)\n        setUser({ ...user, [name]: value });\n    }\n\n    const handelSubmit = async (event) => {\n        event.preventDefault();\n\n        // 유효성 검사 실행\n        const isValid = validateForm();\n        if (!isValid) {\n            console.error(\"Form validation failed. Please check the fields.\");\n            return; // 유효하지 않으면 POST 요청 중지\n        }\n        \n        console.log(user)\n        try {\n            setIsLoading(true);\n            const response = await fetch(createUserApi, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(user),\n            });\n\n            if (response.ok) {\n                console.log('Form submitted successfully!');\n                setUser({name: \"\",email: \"\",phone: \"\",studentId: \"\", major: \"\"})\n                navigate('/show-user');\n            } else {\n                console.error('Form submission failed!');\n            }\n\n        } catch (error) {\n            setError(error.message);\n        } finally{\n            setIsLoading(false);\n        }\n    }\n\n    return (\n        <div className='user-form'>\n            <div className='heading'>\n            {isLoading && <Loader />}\n            {error && <p>Error: {error}</p>}\n                <p>User Form</p>\n            </div>\n            <form onSubmit={handelSubmit}>\n                <div className=\"mb-3\">\n                    <label for=\"name\" className=\"form-label\">Name</label>\n                    <input type=\"text\" className=\"form-control\" id=\"name\" name=\"name\" value={user.name} onChange={handelInput} />\n                </div>\n                <div className=\"mb-3 mt-3\">\n                    <label for=\"email\" className=\"form-label\">Email</label>\n                    <input type=\"email\" className=\"form-control\" id=\"email\" name=\"email\" value={user.email} onChange={handelInput} />\n                </div>\n                <div className=\"mb-3\">\n                    <label for=\"pwd\" className=\"form-label\">Phone</label>\n                    <input type=\"text\" className=\"form-control\" id=\"phone\" name=\"phone\" value={user.phone} onChange={handelInput} />\n                </div>\n                 {/* Student ID Field (학번 필드 추가) */}\n        <div className=\"mb-3\">\n          <label htmlFor=\"studentId\" className=\"form-label\">Student ID</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"studentId\"\n            name=\"studentId\"\n            value={user.studentId}\n            onChange={handelInput}\n          />\n        </div>\n\n        {/* Major Field (전공 필드 추가) */}\n        <div className=\"mb-3\">\n          <label htmlFor=\"major\" className=\"form-label\">Major</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"major\"\n            name=\"major\"\n            value={user.major}\n            onChange={handelInput}\n          />\n        </div>\n                <button type=\"submit\" className=\"btn btn-primary submit-btn\">Submit</button>\n            </form>\n        </div>\n    )\n}\n\nexport default CreateUser"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}