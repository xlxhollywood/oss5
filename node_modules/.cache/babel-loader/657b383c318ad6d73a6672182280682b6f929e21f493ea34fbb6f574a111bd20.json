{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import Loader from\"../Common/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ShowUser=()=>{const showUserApi=\"https://67028a6bbd7c8c1ccd3f27a6.mockapi.io/user\";const[user,setUser]=useState([]);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const handelDelete=async id=>{console.log(\"id : -\",id);setIsLoading(true);try{const response=await fetch(showUserApi.concat(\"/\")+id,{method:\"DELETE\"});if(!response.ok){throw new Error(\"Failed to delete item\");}setUser(user.filter(item=>item.id!==id));}catch(error){setError(error.message);}finally{setIsLoading(false);}};useEffect(()=>{getUsers();},[]);const getUsers=()=>{axios.get(showUserApi).then(res=>{setUser(res.data);}).catch(err=>{console.log(err);});};if(user.length<0){return/*#__PURE__*/_jsx(\"h1\",{children:\"no user found\"});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[isLoading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Student ID\"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\"Major\"}),\"      \",/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:user===null||user===void 0?void 0:user.map((item,i)=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.email}),/*#__PURE__*/_jsx(\"td\",{children:item.phone}),/*#__PURE__*/_jsx(\"td\",{children:item.studentId}),\" \",/*#__PURE__*/_jsx(\"td\",{children:item.major}),\"     \",/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/edit-user/\".concat(item.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\",\"aria-hidden\":\"true\"})}),/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(item.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-eye\",\"aria-hidden\":\"true\"})}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash-o\",\"aria-hidden\":\"true\",onClick:()=>handelDelete(item.id)})]})]},i+1);})})]})]});}};export default ShowUser;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","Loader","jsx","_jsx","jsxs","_jsxs","ShowUser","showUserApi","user","setUser","isLoading","setIsLoading","error","setError","handelDelete","id","console","log","response","fetch","concat","method","ok","Error","filter","item","message","getUsers","get","then","res","data","catch","err","length","children","className","map","i","name","email","phone","studentId","major","to","onClick"],"sources":["/Users/pro/github-classroom/2024OSS/5-assignment-4-2-react-practice-xlxhollywood/src/components/User/ShowUser.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../Common/Loader\";\n\nconst ShowUser = () => {\n  const showUserApi = \"https://67028a6bbd7c8c1ccd3f27a6.mockapi.io/user\";\n\n  const [user, setUser] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handelDelete = async (id) => {\n    console.log(\"id : -\", id);\n    setIsLoading(true);\n    try {\n      const response = await fetch(showUserApi.concat(\"/\") + id, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to delete item\");\n      }\n      setUser(user.filter((item) => item.id !== id));\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  const getUsers = () => {\n    axios\n      .get(showUserApi)\n      .then((res) => {\n        setUser(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  if (user.length < 0) {\n    return <h1>no user found</h1>;\n  } else {\n    return (\n      <div className=\"mt-5\">\n        {isLoading && <Loader />}\n        {error && <p>Error: {error}</p>}\n        <table className=\"table table-striped\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Name</th>\n              <th>Email</th>\n              <th>Phone</th>\n              <th>Student ID</th> {/* 학번 필드 추가 */}\n              <th>Major</th>      {/* 전공 필드 추가 */}\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {user?.map((item, i) => {\n              return (\n                <tr key={i + 1}>\n                  <td>{i + 1}</td>\n                  <td>{item.name}</td>\n                  <td>{item.email}</td>\n                  <td>{item.phone}</td>\n                  <td>{item.studentId}</td> {/* 학번 데이터 추가 */}\n                  <td>{item.major}</td>     {/* 전공 데이터 추가 */}\n                  <td>\n                    <Link to={`/edit-user/${item.id}`}>\n                      <i className=\"fa fa-pencil\" aria-hidden=\"true\"></i>\n                    </Link>\n                    <Link to={`/user/${item.id}`}>\n                      <i className=\"fa fa-eye\" aria-hidden=\"true\"></i>\n                    </Link>\n\n                    <i\n                      className=\"fa fa-trash-o\"\n                      aria-hidden=\"true\"\n                      onClick={() => handelDelete(item.id)}\n                    ></i>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n};\n\nexport default ShowUser;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}